<div fxFlex fxLayout="column">
  <md-progress-bar *ngIf="sending" mode="indeterminate"></md-progress-bar>
  <div md-dialog-title fxLayout="row">
    <span fxFlex>Link Card to Mail</span>
    <span *ngIf="!editTitle" fxFlex>{{task.name}}</span>
    <md-input-container fxFlex *ngIf="editTitle">
      <input md-input type="text" name="title" placeholder="Task Name" maxRows="3" [(ngModel)]="task.name" value="task.name">
    </md-input-container>
    <md-icon *ngIf="!editTitle" (click)="editTitle = true">mode_edit</md-icon>
    <md-icon *ngIf="editTitle" (click)="editTitle = false">done</md-icon>
    <md-icon (click)="closeDialog()" class="pointer">close</md-icon>
  </div>
  <div>
    <form fxFlex fxLayout="column">
      <div fxLayout="row" class="selectList">
        <md-icon fxFlex="3">dashboard</md-icon>
        <md-select fxFlex="42" name="board-select" [(ngModel)]="task.board" required placeholder="Select a board..">
          <md-option *ngFor="let board of boards; let b = index" [value]="board" (onSelect)="onSelectBoard(board)">
            {{ board.name }}
          </md-option>
        </md-select>
        <div fxFlex="10"></div>
        <md-icon fxFlex="3" *ngIf="task.board">description</md-icon>
        <md-select fxFlex="42" [(ngModel)]="task.card" name="list-select" *ngIf="task.board"  required placeholder="Select a card..">
          <md-option *ngFor="let card of task.board.cards" [value]="card">
            {{ card.name }}
          </md-option>
        </md-select>
      </div>


      <!--
      <div fxLayout="row" *ngIf="task.board" >
        <md-icon fxFlex="3">date_range</md-icon>
        <div fxFlex="42">
          <md-input-container fxFlex="20">
            <input name="date" md-input placeholder="Due Date" type="date" required [(ngModel)]="task.date" value="task.date | date:'yyyy-MM-dd'">
          </md-input-container>
        </div>
        <div fxFlex="10"></div>
        <md-icon fxFlex="3">person</md-icon>
        <div fxFlex="42" *ngIf="task.board">
          <div fxLayout="row">
            <div *ngFor="let member of task.selectedMembers; let i = index" [title]="member.fullName" fxLayout="row" fxLayoutAlign="center center" class="member-initials">
              <span >{{member.initials}}</span>
              <md-icon (click)="deleteMember(member, i)">close</md-icon>
            </div>
          </div>
          <md-select class="selectList board-width" placeholder="Delegate to.." [(ngModel)]="currMember" name="member" (onClose)="currMember = ''">
            <md-option [value]="''">Choose...</md-option>
            <md-option *ngFor="let member of task.possibleMembers; let i = index" [value]="member" (onSelect)="addMember(member, i)">
              {{ member.fullName }}
            </md-option>
          </md-select>
        </div>
      </div>
      <md-input-container>
        <textarea md-input type="text" name="task-description" placeholder="Task Description" maxRows="3" [(ngModel)]="task.desc" value="task.desc" rows="10"></textarea>
      </md-input-container>-->
    </form>
  </div>
  <md-dialog-actions>
    <button md-submit md-raised-button color="primary" [disabled]="sending" (click)="linkTask()">Link Task</button>
  </md-dialog-actions>
</div>
